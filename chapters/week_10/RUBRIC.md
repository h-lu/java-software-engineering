# Week 10 评分标准：AI 生成前端与审查训练

## 总分：100 分（基础 100 分 + 进阶 20 分）

---

## 评分维度

| 维度 | 分值 | 评分标准 | 验证方式 |
|------|------|---------|---------|
| **Prompt 工程** | 15 | Prompt 是否清晰、完整（角色、任务、约束、格式） | 检查 PROMPT.md |
| **代码审查** | 25 | 是否使用检查清单，发现的问题数量和严重性 | 检查 REVIEW.md |
| **问题修复** | 25 | 修复是否有效，代码质量是否提升 | 检查 index.html |
| **CORS 配置** | 15 | 后端 CORS 配置是否正确 | 检查 App.java + 截图 |
| **审查报告** | 15 | 报告是否完整、分析是否深入 | 检查 REVIEW.md |
| **代码规范** | 5 | 命名、格式、注释是否符合规范 | 检查所有代码文件 |

---

## 详细评分标准

### 1. Prompt 工程（15 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 13-15 | 四要素齐全（角色、任务、约束、格式），描述清晰具体，API 信息准确，约束条件明确（安全、错误处理、加载状态） |
| 良好 | 10-12 | 四要素基本齐全，描述较清晰，缺少 1-2 个细节（如缺少错误处理要求或格式要求不够具体） |
| 合格 | 7-9 | 有基本 Prompt 结构，但缺少某些要素（如无角色定义或约束不明确） |
| 不合格 | 0-6 | Prompt 过于简单（如只有"帮我写个前端"），缺少必要信息 |

**检查要点**：
- [ ] 角色定义：明确 AI 扮演什么角色（如"专业前端工程师"）
- [ ] 任务描述：清楚说明要生成什么（功能列表、页面结构）
- [ ] 约束条件：包含安全要求（XSS 防护）、错误处理、技术栈限制
- [ ] 格式要求：指定输出格式（完整 HTML 文件、内联 CSS/JS）

---

### 2. 代码审查（25 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 22-25 | 使用了完整检查清单，发现 4+ 类不同问题，包含至少 1 个安全问题（XSS），问题描述准确有证据 |
| 良好 | 17-21 | 使用了检查清单，发现 3 类不同问题，问题描述较准确 |
| 合格 | 12-16 | 使用了检查清单，发现 2 类问题，描述基本清楚 |
| 不合格 | 0-11 | 未使用检查清单或仅发现 1 类问题，描述模糊 |

**问题类型权重**：
- 安全问题（XSS、CSRF）：+5 分（必须发现至少 1 个）
- 边界情况（空状态、错误处理）：+5 分
- API 错误/幻觉：+5 分
- 可维护性问题：+3 分
- 其他功能性问题：+2 分

**检查要点**：
- [ ] 检查清单完整（功能正确性、边界情况、安全、可维护性、AI 特定问题）
- [ ] 发现 XSS 或 innerHTML 使用问题
- [ ] 发现空列表/空输入处理遗漏
- [ ] 发现网络错误/加载状态遗漏
- [ ] 每个问题有具体代码位置（行号或函数名）
- [ ] 每个问题有风险等级评估

---

### 3. 问题修复（25 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 22-25 | 所有发现的问题都已修复，XSS 防护正确（使用 textContent），错误处理完善，有 2+ 用户体验优化 |
| 良好 | 17-21 | 主要问题已修复，XSS 已处理，有基本错误处理，有 1-2 个用户体验优化 |
| 合格 | 12-16 | 部分问题修复，XSS 处理可能不完整，错误处理基本 |
| 不合格 | 0-11 | 修复不完整或无效，仍有明显安全问题 |

**检查要点**：
- [ ] XSS 修复：使用 textContent 或 createElement 替代 innerHTML（8 分）
- [ ] 空状态处理：列表为空时显示友好提示（5 分）
- [ ] 错误处理：网络错误、HTTP 错误有处理（5 分）
- [ ] 加载状态：有加载指示器（3 分）
- [ ] 用户体验优化：表单清空、删除确认、成功提示等（4 分）

**XSS 修复验证**：
```javascript
// 正确修复（安全）
const div = document.createElement('div');
div.textContent = task.title;  // 自动转义

// 错误修复（仍然有风险）
element.innerHTML = escapeHtml(task.title);  // 依赖转义函数
```

---

### 4. CORS 配置（15 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 13-15 | CORS 配置正确，使用 Javalin 的 enableCors，前后端通信正常，有截图证明 |
| 良好 | 10-12 | CORS 配置基本正确，前后端能通信，截图完整 |
| 合格 | 7-9 | CORS 配置有尝试，但可能不完整（如缺少必要导入） |
| 不合格 | 0-6 | 未配置 CORS 或配置错误导致无法通信 |

**检查要点**：
- [ ] App.java 中包含 CORS 配置（8 分）
- [ ] 使用了 `config.bundledPlugins.enableCors`（4 分）
- [ ] 截图显示前后端通信正常（3 分）

**正确配置示例**：
```java
import io.javalin.plugin.bundled.CorsPlugin;

var app = Javalin.create(config -> {
    config.bundledPlugins.enableCors(cors -> {
        cors.addRule(CorsRule::anyHost);
    });
}).start(7070);
```

---

### 5. 审查报告（15 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 13-15 | 报告结构完整，问题分析深入，有经验总结，体现批判性思维 |
| 良好 | 10-12 | 报告结构完整，问题描述清楚，有经验总结 |
| 合格 | 7-9 | 报告基本完整，但分析较浅或缺少某些部分 |
| 不合格 | 0-6 | 报告不完整或过于简单 |

**报告结构要求**：
- [ ] 原始 Prompt 记录（2 分）
- [ ] 检查清单及勾选结果（3 分）
- [ ] 发现的问题列表（每类问题 2 分，最多 6 分）
- [ ] 修复说明（2 分）
- [ ] 经验总结（AI 擅长/不擅长）（2 分）

---

### 6. 代码规范（5 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 5 | 命名清晰，格式一致，有适当注释 |
| 良好 | 4 | 基本规范， minor 问题 |
| 合格 | 3 | 有少量规范问题 |
| 不合格 | 0-2 | 命名混乱，格式不一致 |

**检查要点**：
- [ ] 变量/函数命名有意义（camelCase）
- [ ] 缩进一致（2 或 4 个空格）
- [ ] 有必要的注释说明复杂逻辑

---

## 等级划分

| 等级 | 分数范围 | 描述 |
|------|---------|------|
| **A** | 90-100 | Prompt 优秀，发现 4+ 类问题，修复彻底，报告深入，体现优秀的 AI 协作能力 |
| **B** | 80-89 | Prompt 良好，发现 3 类问题，修复有效，报告完整，具备良好的审查能力 |
| **C** | 70-79 | Prompt 基本可用，发现 2 类问题，部分修复，报告基本完整 |
| **D** | 60-69 | Prompt 不完整，仅发现 1 类问题，修复不彻底，报告较简单 |
| **F** | <60 | 未完成或严重不符合要求 |

---

## 进阶作业评分（+20 分）

| 项目 | 分值 | 评分标准 |
|------|------|---------|
| 功能扩展 | +8 | 实现 2+ 功能（筛选/搜索/排序/逾期提醒/统计），每个 4 分 |
| UI 改进 | +6 | 使用 CSS 框架（3 分）+ 响应式设计或动画（3 分） |
| 前端测试 | +6 | 3+ 个测试用例，覆盖关键功能，每个 2 分 |

**进阶作业等级**：
- 完成全部进阶：+20 分（总分可达 120 分，但最高记 100 分）
- 完成 2 项：+12-14 分
- 完成 1 项：+6-8 分

---

## 迟交政策

| 迟交时间 | 扣分 |
|---------|------|
| 24 小时内 | -10% |
| 48 小时内 | -20% |
| 超过 48 小时 | 按 0 分计 |

---

## 学术诚信

- **允许**：使用 AI 生成代码、让 AI 帮助审查、参考公开文档
- **禁止**：
  - 直接复制其他同学的前端代码
  - 在审查报告中编造不存在的问题
  - 使用 AI 生成的截图（必须是自己运行的真实截图）

**审查报告必须基于实际代码**：我们会抽查 AI 生成的原始代码和审查报告的一致性。

---

## 评分检查清单（助教使用）

### 文件完整性检查
- [ ] PROMPT.md 存在且非空
- [ ] frontend/ai_generated.html 存在
- [ ] frontend/index.html 存在
- [ ] REVIEW.md 存在且非空
- [ ] AI_TOOL.md 存在
- [ ] src/main/java/com/campusflow/App.java 存在
- [ ] cors_screenshot.png 存在

### 功能验证
- [ ] 后端能启动（`mvn compile exec:java`）
- [ ] 前端能加载任务列表
- [ ] 能添加新任务
- [ ] 能删除任务
- [ ] 浏览器控制台无 CORS 错误

### 代码审查
- [ ] XSS 问题已修复（检查是否使用 textContent）
- [ ] 空状态已处理
- [ ] 错误处理已添加

---

## 反馈模板

### 优秀作业反馈示例
```
总分：92/100（A）

亮点：
- Prompt 设计非常专业，四要素齐全，约束条件明确
- 审查报告发现了 5 类问题，包括 XSS、空状态、API 幻觉、加载状态、命名规范
- XSS 修复使用了 textContent，安全可靠
- 添加了加载动画和删除确认，用户体验优秀

建议：
- 可以考虑添加更多边界情况测试（如超长标题处理）
- CORS 配置可以补充生产环境的安全建议
```

### 需改进作业反馈示例
```
总分：68/100（D）

问题：
- Prompt 过于简单，缺少约束条件（-5 分）
- 只发现了 1 类问题（缺少错误处理），遗漏了明显的 XSS 风险（-12 分）
- 修复后的代码仍然使用 innerHTML（-10 分）
- CORS 配置缺少必要导入，无法编译（-5 分）

改进建议：
1. 重新阅读 Week 10 第 3 节的审查检查清单
2. 测试 XSS：尝试输入 <script>alert('xss')</script> 作为任务标题
3. 参考课程示例修复 CORS 配置
4. 补充安全相关的审查内容
```
