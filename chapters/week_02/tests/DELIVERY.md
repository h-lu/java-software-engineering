# Week 02 测试套件交付文档

## 交付内容

### 测试文件（4 个）

| 文件 | 大小 | 测试数量 | 说明 |
|------|------|---------|------|
| test_smoke.py | 2.6 KB | 12 | 基线测试，验证 Python 基础功能 |
| test_conditionals.py | 9.8 KB | 30 | 条件判断（if/elif/else）测试 |
| test_loops.py | 11 KB | 35 | 循环（for/while/range）测试 |
| test_booleans.py | 15 KB | 73 | 布尔表达式和逻辑运算测试 |
| **总计** | **38.4 KB** | **150** | **完整测试覆盖** |

### 文档文件（4 个）

| 文件 | 大小 | 说明 |
|------|------|------|
| README.md | 4.7 KB | 测试套件完整文档 |
| TEST_SUMMARY.md | 6.9 KB | 测试覆盖矩阵和设计亮点 |
| QUICK_START.md | 3.9 KB | 快速参考指南 |
| __init__.py | 97 B | Python 包初始化文件 |

## 测试覆盖的知识点

### 1. 条件判断（30 个测试）

#### if/elif/else 结构
- ✅ 单分支 if 语句
- ✅ 双分支 if/else 语句
- ✅ 多分支 if/elif/else 语句
- ✅ 嵌套条件判断

#### 条件的顺序性
- ✅ 从上到下检查
- ✅ 第一个满足的条件执行
- ✅ 条件顺序的重要性

#### 边界值测试
- ✅ 18 岁（成年/未成年边界）
- ✅ 60/80/90 分（评级边界）
- ✅ 0/99（无效输入）

#### 实际应用场景
- ✅ 年龄判断（成年/未成年）
- ✅ 分数评级（优秀/良好/及格/不及格）
- ✅ 猜数字判断（正确/太大/太小）
- ✅ 难度选择（简单/中等/困难/无效）
- ✅ PyHelper 心情推荐

### 2. 循环（35 个测试）

#### range() 函数
- ✅ `range(n)` - 0 到 n-1
- ✅ `range(start, stop)` - 起点 to 终点
- ✅ `range(start, stop, step)` - 带步长
- ✅ `range(5, 0, -1)` - 倒序
- ✅ `range(0)` - 空序列
- ✅ `range(1)` - 单元素

#### for 循环
- ✅ 基本循环结构
- ✅ 循环计数器（从 1 开始显示）
- ✅ break 跳出循环
- ✅ continue 跳过迭代
- ✅ 嵌套循环（乘法表）

#### while 循环
- ✅ 条件控制循环
- ✅ 倒计时逻辑
- ✅ break 退出
- ✅ continue 跳过
- ✅ 防止无限循环

#### for...else 结构
- ✅ 正常结束时执行 else
- ✅ break 时不执行 else
- ✅ 猜数字游戏的应用

#### 实际应用场景
- ✅ 猜数字游戏（限制次数、剩余次数）
- ✅ 累加器（求和）
- ✅ 构建列表/字符串
- ✅ 阶乘计算
- ✅ FizzBuzz 游戏

### 3. 布尔表达式（73 个测试）

#### 比较运算符
- ✅ `==` 相等
- ✅ `!=` 不等
- ✅ `<` 小于
- ✅ `>` 大于
- ✅ `<=` 小于等于
- ✅ `>=` 大于等于

#### 逻辑运算符
- ✅ `and`（且）- 两个都为真
- ✅ `or`（或）- 至少一个为真
- ✅ `not`（非）- 取反
- ✅ 短路求值（short-circuit）

#### 复杂表达式
- ✅ and/or 组合
- ✅ 运算符优先级
- ✅ 德摩根定律
- ✅ 表达式简化（可读性优化）

#### in 和 not in
- ✅ 列表成员检查
- ✅ 字符串子串检查
- ✅ 难度验证（老潘推荐的写法）

#### 真值判断（Truthy/Falsy）
- ✅ 非零数字为真
- ✅ 零为假
- ✅ 非空字符串为真
- ✅ 空字符串为假
- ✅ 非空容器为真
- ✅ 空容器为假

#### 实际应用场景
- ✅ 用户输入验证
- ✅ 年龄优惠资格判断
- ✅ 用户名验证
- ✅ 密码强度检查
- ✅ 游戏结束条件
- ✅ 是否继续猜测

### 4. 基线测试（12 个测试）

验证 Python 基础功能是否正常工作：
- ✅ if/else 判断
- ✅ for/while 循环
- ✅ and/or/not 运算
- ✅ 比较运算符
- ✅ range() 函数
- ✅ break/continue 语句

## 测试设计特点

### 1. 正例 + 边界 + 反例

每个功能都包含三种测试：
- **正例**：正常输入应该通过
- **边界**：边界值（如 18 岁、60 分、0 次）
- **反例**：错误输入应该被拒绝

### 2. 参数化测试

使用 `@pytest.mark.parametrize` 减少重复代码：
```python
@pytest.mark.parametrize("score, expected", [
    (90, "优秀"),
    (89, "良好"),
    # ... 更多测试用例
])
def test_score_grade_boundaries(score, expected):
    # 一个测试函数，多种输入
```

### 3. 清晰的命名

测试函数名采用 `test_<功能>_<场景>_<预期结果>` 格式：
- `test_score_grade_excellent()` - 一看就知道测试什么
- `test_for_loop_with_break()` - 测试 for 循环的 break
- `test_guess_number_too_low()` - 测试猜数字"太小"的情况

### 4. 实际应用场景

测试不是抽象的语法验证，而是基于实际场景：
- 猜数字游戏的判断逻辑
- PyHelper 的心情推荐
- 用户输入验证
- 密码强度检查

## 运行验证

### 所有测试通过

```bash
$ python3 -m pytest chapters/week_02/tests -q
........................................................................ [ 48%]
........................................................................ [ 96%]
......                                                                   [100%]
150 passed in 0.14s
```

### 按文件运行

```bash
$ python3 -m pytest chapters/week_02/tests/test_smoke.py -v
12 passed in 0.02s

$ python3 -m pytest chapters/week_02/tests/test_conditionals.py -v
30 passed in 0.03s

$ python3 -m pytest chapters/week_02/tests/test_loops.py -v
35 passed in 0.04s

$ python3 -m pytest chapters/week_02/tests/test_booleans.py -v
73 passed in 0.06s
```

### 关键词过滤

```bash
$ python3 -m pytest chapters/week_02/tests -k "boundary" -v
15 passed in 0.02s

$ python3 -m pytest chapters/week_02/tests -k "guess" -v
10 passed in 0.02s
```

## 与 CHAPTER.md 的对应

| CHAPTER.md 章节 | 测试文件 | 测试数量 | 对应关系 |
|----------------|---------|---------|---------|
| 1. 如果这样，那就那样 | test_conditionals.py | 30 | if/elif/else、条件判断 |
| 2. 让它一直猜，直到猜中 | test_loops.py（部分） | 15 | while 循环 |
| 3. 数到几就停 | test_loops.py（部分） | 20 | for 循环、range() |
| 4. 当条件变得复杂 | test_booleans.py | 73 | 布尔表达式、逻辑运算 |
| 贯穿案例 | 跨多个文件 | 10+ | 猜数字游戏 |
| PyHelper 进度 | test_conditionals.py | 4 | 心情推荐逻辑 |

## 教学价值

### 1. 作为学习材料

- **示例代码**：每个测试都是一个可运行的小例子
- **边界意识**：教会学生思考边界情况
- **最佳实践**：展示清晰命名、参数化等技巧

### 2. 作为验证工具

- **自我检查**：学生完成作业后运行测试验证
- **快速反馈**：测试失败立即知道哪里有问题
- **进度追踪**：通过的测试数量反映学习进度

### 3. 作为调试工具

- **定位问题**：失败的测试指出具体问题
- **理解预期**：测试代码展示预期行为
- **修复验证**：修复后重新运行测试确认

## 质量保证

### 代码质量
- ✅ 所有测试通过（150/150）
- ✅ 无语法错误
- ✅ 无逻辑错误
- ✅ 清晰的命名
- ✅ 完整的文档字符串

### 测试覆盖
- ✅ 覆盖所有核心知识点
- ✅ 包含正例、边界、反例
- ✅ 使用参数化测试减少重复
- ✅ 实际应用场景

### 文档完整
- ✅ README.md - 完整使用说明
- ✅ TEST_SUMMARY.md - 详细覆盖矩阵
- ✅ QUICK_START.md - 快速参考指南
- ✅ 代码内注释 - 每个测试都有说明

## 后续使用建议

### 对于学生
1. 完成作业后运行测试验证
2. 阅读测试代码理解预期行为
3. 使用测试作为学习材料
4. 尝试为额外功能编写测试

### 对于教师
1. 使用测试检查学生作业
2. 讲解测试展示最佳实践
3. 利用测试进行代码审查
4. 扩展测试覆盖更多场景

### 对于课程维护
1. 添加新功能时补充测试
2. 发现 bug 时添加回归测试
3. 定期检查测试覆盖
4. 保持测试代码质量

## 总结

Week 02 测试套件提供了：

- **150 个测试用例**，全面覆盖条件判断、循环和布尔表达式
- **4 个测试文件**，按知识点组织
- **4 个文档文件**，提供完整的使用说明和参考
- **100% 通过率**，确保测试质量
- **实际应用场景**，连接理论与实践

这套测试为 Week 02 的学习提供了坚实的验证基础，帮助学生掌握条件判断、循环和布尔表达式的核心概念。

---

**交付日期**：2026-02-08
**测试框架**：pytest 9.0.2
**Python 版本**：3.12.5
**状态**：✅ 所有测试通过
