# Week 02 评分标准

## 评分维度

### 1. 功能完成度（40%）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 36-40 | 基础功能完整，进阶功能完成 2 项以上，游戏逻辑流畅无 bug |
| 良好 | 28-35 | 基础功能完整，进阶功能完成 1 项，有小瑕疵但不影响游戏 |
| 合格 | 20-27 | 基础功能基本完整，能运行但游戏体验有瑕疵 |
| 不合格 | 0-19 | 基础功能缺失或无法运行 |

**检查点：**
- [ ] 能使用 `random.randint()` 生成随机答案
- [ ] 能正确获取用户输入并转换为整数
- [ ] 能用 `if/elif/else` 判断猜测和答案的关系
- [ ] 能用循环控制猜测次数（最多 5 次）
- [ ] 猜中时能用 `break` 退出循环
- [ ] 能正确显示"大了"、"小了"、"猜对了"的提示
- [ ] 能显示剩余次数
- [ ] 5 次未猜中时能显示正确答案
- [ ] （进阶）输入验证逻辑正确
- [ ] （进阶）难度选择功能正常

---

### 2. 代码质量（30%）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 27-30 | 变量命名清晰规范，代码结构清晰，有适当的空行分隔逻辑块，缩进正确 |
| 良好 | 21-26 | 变量命名基本规范，代码结构合理，可读性较好 |
| 合格 | 15-20 | 变量命名能看懂，代码能运行但结构较乱 |
| 不合格 | 0-14 | 变量命名混乱（如单字母变量），代码难以阅读 |

**检查点：**
- [ ] 变量名有意义（如 `secret`, `guess`, `attempt`，而不是 `a`, `b`, `c`）
- [ ] 变量名使用小写字母和下划线（snake_case）
- [ ] 代码缩进正确（4 个空格，不是 Tab）
- [ ] `if/elif/else` 和 `for/while` 后面有冒号
- [ ] 逻辑块之间有适当的空行
- [ ] 没有未使用的变量
- [ ] 没有未使用的导入

**常见扣分项：**
- 使用拼音缩写（如 `cs`、`cishu`）作为变量名（-3 分）
- 变量名大小写混用（如 `Secret`、`Guess`）（-2 分）
- 缩进不一致（有些 2 空格，有些 4 空格）（-3 分）
- `if/for/while` 后面忘记冒号（-2 分）
- 一行代码过长（超过 80 字符）（-1 分）

---

### 3. 条件判断与循环（20%）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 18-20 | 正确使用 if/elif/else，循环逻辑清晰，break/continue 使用得当 |
| 良好 | 14-17 | 条件判断和循环基本正确，有小的逻辑问题 |
| 合格 | 10-13 | 能使用基本的 if 和循环，但逻辑不完整或有明显问题 |
| 不合格 | 0-9 | 不会使用条件判断或循环，或逻辑完全错误 |

**检查点：**
- [ ] 正确使用 `==` 比较（不是 `=`）
- [ ] 正确使用 `<`, `>`, `<=`, `>=` 比较运算符
- [ ] `if/elif/else` 结构完整，条件没有遗漏
- [ ] `for` 或 `while` 循环能正确控制次数
- [ ] 猜中时用 `break` 退出循环
- [ ] （进阶）无效输入时用 `continue` 跳过
- [ ] 理解 `for...else` 的含义（正常结束时执行）

**常见错误示例：**

**错误 1：用 `=` 代替 `==`**
```python
if guess = secret:  # ❌ 这是赋值，不是比较
    print("猜对了")

if guess == secret:  # ✅ 正确的比较
    print("猜对了")
```

**错误 2：忘记 `break`**
```python
if guess == secret:
    print("恭喜！")
    # ❌ 忘记 break，循环继续

if guess == secret:
    print("恭喜！")
    break  # ✅ 正确
```

**错误 3：`range()` 理解错误**
```python
for attempt in range(5):
    print(f"第 {attempt} 次猜测")  # ❌ 显示 0, 1, 2, 3, 4

for attempt in range(5):
    print(f"第 {attempt + 1} 次猜测")  # ✅ 显示 1, 2, 3, 4, 5
```

---

### 4. 文档与注释（10%）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 9-10 | 文件头有注释说明，关键步骤有注释，注释简洁有效 |
| 良好 | 7-8 | 有文件头注释，主要逻辑有注释 |
| 合格 | 5-6 | 有少量注释，能说明代码用途 |
| 不合格 | 0-4 | 完全没有注释，或注释全是废话 |

**检查点：**
- [ ] 文件头部有注释说明程序功能和作者
- [ ] 关键逻辑有简洁的注释（如为什么用 `break`）
- [ ] 没有显而易见的废话注释（如 `# 打印输出` 紧跟 `print()`）

**标准文件头示例：**
```python
# guess_number.py
# 猜数字游戏
# 功能：随机生成 1-100 数字，玩家在 5 次机会内猜中
# 作者：你的名字
# 日期：2026-02-08
```

---

## 提交清单

学生提交前必须确认以下事项：

### 代码要求
- [ ] `guess_number.py` 文件存在且非空
- [ ] 代码可以直接运行：`python3 guess_number.py`
- [ ] 程序能正常交互，不崩溃
- [ ] 导入了 `random` 模块

### 测试要求
- [ ] 通过所有 pytest 测试：`python3 -m pytest chapters/week_02/tests -q`
- [ ] 没有语法错误（SyntaxError）
- [ ] 没有名称错误（NameError）
- [ ] 能正确处理标准输入
- [ ] 猜中时游戏结束
- [ ] 5 次未中时显示答案

### Git 要求
- [ ] 至少 2 次提交
- [ ] 提交信息清晰（如 `draft: 基础版本`, `verify: 完成测试`）
- [ ] 代码已推送到仓库

### 文档要求
- [ ] 包含必要的注释
- [ ] 变量命名清晰
- [ ] 代码结构合理

---

## 评分示例

### 示例 A：优秀作业（95 分）

```python
# guess_number.py
# 猜数字游戏
# 功能：随机生成 1-100 数字，玩家在 5 次机会内猜中
# 作者：李小明

import random

print("=== 猜数字游戏 ===")

# 生成随机答案
secret = random.randint(1, 100)
max_attempts = 5

print(f"我已经想好了一个 1 到 100 之间的数字，你有 {max_attempts} 次机会猜中它！\n")

# 主游戏循环
for attempt in range(max_attempts):
    # 获取用户输入
    guess = input(f"第 {attempt + 1} 次猜测，请输入数字：")

    # 输入验证
    if not guess.isdigit():
        print("请输入一个有效的数字！\n")
        continue

    guess = int(guess)

    if guess < 1 or guess > 100:
        print("数字必须在 1 到 100 之间！\n")
        continue

    # 判断猜测
    if guess == secret:
        print(f"恭喜！你用了 {attempt + 1} 次猜中了答案 {secret}！")
        break
    elif guess < secret:
        print("太小了")
    else:
        print("太大了")

    # 显示剩余次数
    remaining = max_attempts - attempt - 1
    if remaining > 0:
        print(f"还有 {remaining} 次机会\n")
else:
    # 循环正常结束（未猜中）
    print(f"\n很遗憾，{max_attempts} 次都用完了。答案是 {secret}")
```

**评语：** 基础功能完整，进阶功能（输入验证）实现良好，变量命名规范，代码结构清晰，注释恰当，使用了 `for...else` 的正确模式。

---

### 示例 B：良好作业（82 分）

```python
import random

secret = random.randint(1, 100)

print("=== 猜数字游戏 ===")
print("我已经想好了一个 1 到 100 之间的数字")

for i in range(5):
    guess = int(input(f"第 {i + 1} 次猜测："))

    if guess == secret:
        print(f"恭喜！答案就是 {secret}")
        break
    elif guess < secret:
        print("太小了")
    else:
        print("太大了")

    if i < 4:
        print(f"还有 {4 - i} 次机会")
else:
    print(f"答案是 {secret}")
```

**评语：** 功能完整，游戏逻辑正确，但缺少输入验证（-5 分），没有文件头注释（-3 分），变量名 `i` 可以更语义化（-2 分），`4 - i` 的计算可以更清晰（-2 分），输出缺少空行分隔（-1 分）。

---

### 示例 C：合格作业（68 分）

```python
import random

secret = random.randint(1, 100)

for attempt in range(5):
    guess = int(input("输入数字："))

    if guess == secret:
        print("对了")
        break
    if guess < secret:
        print("小了")
    if guess > secret:
        print("大了")

print("答案是", secret)
```

**评语：** 基本功能实现，但输出信息过于简陋（-5 分），没有游戏标题和说明（-3 分），没有显示剩余次数（-5 分），未猜中时的提示不够明确（-3 分），没有注释（-3 分），变量命名尚可但可以更好（-2 分），没有使用 `elif` 而是 3 个独立的 `if`（-2 分），使用了 3 个 `if` 而不是 `if/elif/else`（-2 分），输入无效时会崩溃（-5 分）。

---

### 示例 D：不合格作业（40 分）

```python
import random

s = random.randint(1, 100)

for i in range(5):
    g = int(input())
    if g = s:
        print("对")
    else:
        print("错")
```

**评语：** 变量命名完全无意义（-10 分），使用 `=` 而不是 `==` 导致语法错误（-15 分），没有提示信息（-10 分），逻辑不完整（-10 分），缺少注释和文件头（-5 分）。

---

## 快速评分检查表

批改时可以使用以下检查表快速打分：

| 检查项 | 分值 | 得分 |
|--------|------|------|
| 能运行，无语法错误 | 10 | |
| 使用 random 生成答案 | 5 | |
| 使用 if/elif/else 判断 | 8 | |
| 使用 for 或 while 循环 | 7 | |
| 猜中时用 break 退出 | 5 | |
| 显示剩余次数 | 5 | |
| 未猜中时显示答案 | 5 | |
| 变量命名规范 | 10 | |
| 代码结构清晰 | 10 | |
| 有适当注释 | 5 | |
| 通过 pytest 测试 | 10 | |
| （进阶）输入验证 | +5 | |
| （进阶）难度选择 | +5 | |
| （进阶）游戏统计 | +5 | |
| **总分** | **100** | |
