# Week 07 评分标准

## 总分构成

| 维度 | 分值 | 说明 |
|------|------|------|
| 代码正确性 | 40 分 | 代码能正确运行，实现预期功能 |
| 模块化设计 | 30 分 | 合理拆分模块，职责单一，结构清晰 |
| `__name__` 守卫 | 15 分 | 正确使用 `if __name__ == "__main__":` |
| 项目结构与风格 | 15 分 | 命名规范、注释完整、符合 PEP 8 |

**总分**：100 分

---

## 评分细则

### 1. 代码正确性（40 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **练习 1：使用标准库** | 10 分 | - 正确使用三种 import 语法（3 分）<br>- 功能完整（圆面积、抽奖、日期）（4 分）<br>- 异常处理正确（3 分） |
| **练习 2：拆分单文件** | 12 分 | - 模块能独立运行（4 分）<br>- main.py 能正确导入并调用各模块（4 分）<br>- 功能与原单文件一致（4 分） |
| **练习 3：__name__ 守卫** | 8 分 | - 守卫语法正确（3 分）<br>- 直接运行执行测试，导入不执行（3 分）<br>- 测试覆盖正常和边界情况（2 分） |
| **练习 4：包结构** | 10 分 | - 包结构正确（__init__.py 存在）（3 分）<br>- 各模块功能完整（4 分）<br>- test_grades.py 能正确导入和测试（3 分） |

**扣分项**：
- 代码无法运行（-10 分/项）
- 功能明显缺失（-5 分/项）
- 导入错误未解决（-3 分/处）

---

### 2. 模块化设计（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **模块职责清晰** | 12 分 | - 每个模块只负责一类功能（4 分）<br>- 模块之间耦合度低（4 分）<br>- 模块内部内聚性高（4 分） |
| **模块拆分合理性** | 10 分 | - 按功能分组（如文件操作、输入校验、业务逻辑）（5 分）<br>- 模粒度适中（不过大也不过小）（5 分） |
| **代码复用性** | 8 分 | - 模块可以被其他项目复用（4 分）<br>- 避免重复代码（4 分） |

**扣分项**：
- 模块职责不清晰，一个模块做太多事情（-10 分）
- 模块之间循环依赖（-8 分）
- 模块粒度过大（单文件超过 200 行）或过小（不足 10 行且无意义）（-5 分）

---

### 3. `__name__` 守卫（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **守卫语法正确** | 5 分 | - 拼写正确（`__name__` 不是 `__nama__`）（2 分）<br>- 比较运算符正确（`==` 不是 `=`）（2 分）<br>- 字符串正确（`"__main__"`）（1 分） |
| **守卫使用正确** | 6 分 | - 函数定义在守卫外面（3 分）<br>- 测试代码在守卫里面（3 分） |
| **守卫完整性** | 4 分 | - 每个模块都有守卫（2 分）<br>- main.py 有守卫并正确调用 main()（2 分） |

**常见扣分项**：
- 把函数定义写在守卫里面（-6 分）
- 忘记写守卫（-5 分/模块）
- 守卫拼写错误（-3 分）
- main.py 中直接调用 `main()` 而没用守卫（-3 分）

---

### 4. 项目结构与风格（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| **命名规范** | 5 分 | - 模块名用小写和下划线（2 分）<br>- 函数名用小写和下划线（2 分）<br>- 避免单字母变量名（除非是循环变量）（1 分） |
| **注释与文档** | 5 分 | - 每个模块有文件头注释（1 分）<br>- 每个函数有 docstring（2 分）<br>- 复杂逻辑有行内注释（2 分） |
| **项目结构** | 5 分 | - 模块文件在同一目录下（2 分）<br>- 包有 `__init__.py`（2 分）<br>- 数据文件与代码分离（1 分） |

**扣分项**：
- 模块名用大写字母（如 `Storage.py`）（-2 分/处）
- 函数没有 docstring（-1 分/函数）
- 代码格式混乱（缩进不一致、空行过多或过少）（-3 分）

---

## 等级标准

| 等级 | 分数范围 | 描述 |
|------|---------|------|
| **优秀（A）** | 90-100 分 | 模块拆分合理，职责清晰，结构优雅，测试完整，代码风格规范 |
| **良好（B）** | 80-89 分 | 模块化基本正确，功能完整，测试较完整，代码风格基本规范 |
| **合格（C）** | 70-79 分 | 能完成基本功能，模块化有明显改进空间，测试不够完整 |
| **不合格（D）** | 60-69 分 | 代码能运行但模块化存在严重问题，或缺少关键功能 |
| **不合格（F）** | < 60 分 | 代码无法运行，或未完成基础作业 |

---

## 常见扣分项速查表

| 问题 | 扣分 | 所属维度 |
|------|------|----------|
| 代码无法运行（语法错误、导入错误） | -10 分/项 | 代码正确性 |
| 功能明显缺失（如缺少某个必需函数） | -5 分/项 | 代码正确性 |
| 模块职责不清晰（一个模块做太多事） | -10 分 | 模块化设计 |
| 循环导入（A 导入 B，B 又导入 A） | -8 分 | 模块化设计 |
| 没有使用 `__name__` 守卫 | -5 分/模块 | `__name__` 守卫 |
| 把函数定义写在守卫里面 | -6 分 | `__name__` 守卫 |
- 守卫拼写错误（`__nama__`） | -3 分 | `__name__` 守卫 |
| main.py 直接调用 `main()` 没守卫 | -3 分 | `__name__` 守卫 |
| 模块名用大写字母（如 `Storage.py`） | -2 分/处 | 项目结构与风格 |
| 函数没有 docstring | -1 分/函数 | 项目结构与风格 |
| 代码格式混乱（缩进不一致） | -3 分 | 项目结构与风格 |
| 没有异常处理或异常处理不完整 | -3 分/处 | 代码正确性 |

---

## 额外加分项（最多 +10 分）

| 加分项 | 分值 | 说明 |
|--------|------|------|
| 完成进阶练习 5 | +5 分 | 重构自己的项目，模块拆分合理 |
| 完成进阶练习 6 | +3 分 | 项目结构设计合理，文档完整 |
| 完成AI 协作练习 7 | +5 分 | 正确识别 AI 代码的问题并修复 |
| 代码质量特别优秀 | +2 分 | 超越基本要求，有创新点 |

**注意**：加分项总分不超过 10 分。

---

## 测试验证要求

### 自动测试（20 分）

运行 `python3 -m pytest chapters/week_07/tests -q` 必须通过：

```bash
$ python3 -m pytest chapters/week_07/tests -q
.............                                                      [100%]
13 passed in 0.5s
```

**测试通过**：不扣分
**测试失败**：每个失败的测试 -2 分

### 手动验证（10 分）

Reviewer 会手动验证以下内容：

- [ ] 练习 1：`practice1_standard_library.py` 能运行且输出正确
- [ ] 练习 2：`todo_app/` 各模块能独立运行
- [ ] 练习 3：`calculator.py` 守卫正确（导入不执行测试）
- [ ] 练习 4：`grades/` 包结构正确，`test_grades.py` 能运行

**每项不通过**：-2.5 分

---

## Reviewer 检查清单

### 代码正确性检查

- [ ] 运行 `python3 practice1_standard_library.py` 是否正常？
- [ ] 运行 `python3 todo_app/main.py` 是否正常？
- [ ] 单独测试 `todo_app/` 的各模块是否正常？
- [ ] `calculator.py` 的守卫是否正确？
- [ ] `grades/` 包是否能正确导入？

### 模块化设计检查

- [ ] 模块是否按功能分组？
- [ ] 每个模块的职责是否单一？
- [ ] 模块之间的耦合度是否低？
- [ ] 代码是否有重复？

### `__name__` 守卫检查

- [ ] 每个模块都有守卫吗？
- [ ] 函数定义是否在守卫外面？
- [ ] 测试代码是否在守卫里面？
- [ ] main.py 是否正确使用守卫？

### 代码风格检查

- [ ] 模块名是否符合规范（小写+下划线）？
- [ ] 函数名是否符合规范（小写+下划线）？
- [ ] 函数是否有 docstring？
- [ ] 代码缩进是否一致？

---

## 反馈模板

Reviewer 在 PR 中给反馈时，可以使用以下模板：

```markdown
## Week 07 作业评分

### 得分：XX / 100

### 代码正确性（40 分）：XX / 40
- ✅ / ❌ 练习 1：使用标准库（XX / 10）
- ✅ / ❌ 练习 2：拆分单文件（XX / 12）
- ✅ / ❌ 练习 3：__name__ 守卫（XX / 8）
- ✅ / ❌ 练习 4：包结构（XX / 10）

**问题**：
- （列出具体问题）

### 模块化设计（30 分）：XX / 30
- ✅ / ❌ 模块职责清晰（XX / 12）
- ✅ / ❌ 模块拆分合理（XX / 10）
- ✅ / ❌ 代码复用性（XX / 8）

**问题**：
- （列出具体问题）

### `__name__` 守卫（15 分）：XX / 15
- ✅ / ❌ 守卫语法正确（XX / 5）
- ✅ / ❌ 守卫使用正确（XX / 6）
- ✅ / ❌ 守卫完整性（XX / 4）

**问题**：
- （列出具体问题）

### 项目结构与风格（15 分）：XX / 15
- ✅ / ❌ 命名规范（XX / 5）
- ✅ / ❌ 注释与文档（XX / 5)
- ✅ / ❌ 项目结构（XX / 5）

**问题**：
- （列出具体问题）

### 加分项：+XX / 10
- ✅ / ❌ 进阶练习 5（+5 分）
- ✅ / ❌ 进阶练习 6（+3 分）
- ✅ / ❌ AI 协作练习 7（+5 分）
- ✅ / ❌ 代码质量特别优秀（+2 分）

### 总评

**优点**：
- （列出做得好的地方）

**改进建议**：
- （列出需要改进的地方）

### 是否需要修改后重新 review？
- [ ] 是，请在 XX 天内修改后重新提交
- [ ] 否，可以 merge
```

---

## 学生自检清单

在提交前，请确认：

### 代码正确性
- [ ] 所有练习都能运行
- [ ] 异常处理正确
- [ ] 输入输出符合要求

### 模块化设计
- [ ] 每个模块只负责一类功能
- [ ] 模块之间耦合度低
- [ ] 代码没有重复

### `__name__` 守卫
- [ ] 每个模块都有守卫
- [ ] 函数定义在守卫外面
- [ ] 测试代码在守卫里面

### 项目结构与风格
- [ ] 命名符合规范
- [ ] 函数有 docstring
- [ ] 代码格式整洁

### 测试验证
- [ ] 运行 `pytest` 通过所有测试
- [ ] 手动验证各模块能独立运行

只有当以上所有项都打勾时，才建议提交作业。
