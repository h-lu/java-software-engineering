"""
示例：单文件项目的困境

本例演示为什么单文件项目难以维护：
1. 所有功能挤在一个文件里，难以查找
2. 修改一个功能可能影响其他功能（高耦合）
3. 无法复用某个功能到其他项目

运行方式：python3 chapters/week_07/examples/01_single_file_mess.py
预期输出：演示菜单功能，但代码结构混乱
"""

# 这是一个"反例"——展示单文件项目的问题
# 假设这个文件有 1500 行，包含所有功能

# ==================== 第 1 部分：文件操作（~80 行）====================
from pathlib import Path


def get_data_file():
    """获取数据文件路径"""
    return Path.cwd() / "data.txt"


def load_data():
    """加载数据"""
    # ... 20 行代码 ...
    print("[加载数据功能] 已加载 0 条记录")


def save_data(data):
    """保存数据"""
    # ... 20 行代码 ...
    print("[保存数据功能] 已保存")


# ==================== 第 2 部分：输入校验（~100 行）====================
def get_choice():
    """获取用户选择"""
    # ... 20 行代码 ...
    print("[输入校验功能] 获取选择")
    return 1


def get_date():
    """获取日期"""
    # ... 20 行代码 ...
    print("[输入校验功能] 获取日期")
    return "02-09"


def get_content():
    """获取内容"""
    # ... 20 行代码 ...
    print("[输入校验功能] 获取内容")
    return "学习了模块化"


# ==================== 第 3 部分：业务逻辑（~200 行）====================
def add_record(data):
    """添加记录"""
    # ... 30 行代码 ...
    print("[业务逻辑功能] 添加记录")
    data["02-09"] = "学习了模块化"


def show_records(data):
    """显示记录"""
    # ... 30 行代码 ...
    print("[业务逻辑功能] 显示记录")


def show_stats(data):
    """显示统计"""
    # ... 20 行代码 ...
    print("[业务逻辑功能] 显示统计")


# ==================== 第 4 部分：鼓励语（~50 行）====================
def get_mood():
    """获取心情"""
    # ... 15 行代码 ...
    print("[鼓励语功能] 获取心情")
    return "1"


def get_advice(mood):
    """获取建议"""
    # ... 15 行代码 ...
    print("[鼓励语功能] 获取建议")
    return "加油！"


# ==================== 第 5 部分：菜单（~50 行）====================
def print_menu():
    """打印菜单"""
    print("\n请选择功能：")
    print("1. 添加记录")
    print("2. 查看记录")
    print("3. 退出")


# ==================== 第 6 部分：主函数（~100 行）====================
def main():
    """主函数"""
    print("=== 单文件项目示例 ===")

    # 想要修改"输入校验"功能？
    # 你需要在 450 行代码里找到 get_choice() 函数
    # 如果不小心改到了"文件操作"的代码，整个程序就坏了

    data = {}
    choice = get_choice()

    if choice == 1:
        add_record(data)
        show_records(data)


if __name__ == "__main__":
    main()

    print("\n=== 单文件项目的问题 ===")
    print("1. 所有功能挤在一个文件里，难以查找")
    print("2. 想复用'输入校验'功能到其他项目？需要复制 100 行代码")
    print("3. 修改一个功能可能影响其他功能")
    print("4. 两个人同时开发？经常冲突")
    print("\n解决方法：把代码拆成多个模块（见后续示例）")
