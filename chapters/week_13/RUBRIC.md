# Week 13 评分标准：文档与知识传递

## 总分：100 分（基础 100 分 + 进阶 20 分）

---

## 评分维度

| 维度 | 分值 | 评分标准 | 验证方式 |
|------|------|---------|---------|
| **API 文档** | 40 | 编写 OpenAPI 规范，描述所有 REST API 端点 | 检查 openapi.yaml + OpenAPI Editor 验证 |
| **README** | 30 | 编写清晰的项目说明，让新用户 5 分钟跑起来 | 按照 README 步骤从头运行项目 |
| **ADR 索引** | 20 | 汇总所有架构决策，创建索引 | 检查 docs/ADR_INDEX.md |
| **文档审查** | 10 | 审查 AI 生成的文档，使用检查清单 | 检查 docs/REVIEW_REPORT.md |

---

## 详细评分标准

### 1. API 文档（40 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 36-40 | openapi.yaml 完整，包含所有端点，数据模型定义清晰，错误码文档齐全 |
| 良好 | 30-35 | openapi.yaml 基本完整，包含主要端点，数据模型定义基本正确 |
| 合格 | 24-29 | openapi.yaml 包含核心端点，但缺少部分细节 |
| 不合格 | 0-23 | openapi.yaml 格式错误或严重不完整 |

#### 1.1 openapi.yaml 基本结构（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| OpenAPI 版本 | 2 | 正确使用 3.0.3 或相近版本 |
| info 部分 | 4 | 包含 title、description、version |
| servers 部分 | 2 | 定义至少一个服务器 URL |
| 业务约束说明 | 2 | description 包含业务约束（如标题长度限制） |

**检查要点**：
- [ ] openapi 版本正确（3.0.3）（2 分）
- [ ] 包含 title、description、version（4 分）
- [ ] description 包含业务约束说明（2 分）
- [ ] 定义了至少一个服务器（2 分）

**常见错误**：
- OpenAPI 版本号错误（如 2.0 而不是 3.0.3）
- description 为空或只写"项目描述"
- 缺少 servers 部分

#### 1.2 API 端点文档（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| GET /api/tasks | 4 | 包含 summary、description、responses |
| POST /api/tasks | 4 | 包含 summary、description、requestBody、responses |
| PUT /api/tasks/{id} | 2 | 包含基本文档 |
| DELETE /api/tasks/{id} | 2 | 包含基本文档 |
| 参数描述 | 3 | 路径参数、查询参数有说明 |

**单个端点文档评分**（每个 4 分）：
- [ ] 包含 summary（1 分）
- [ ] 包含 description（至少 2 句话）（1 分）
- [ ] 包含 responses（200/201/404/400/500）（1 分）
- [ ] description 包含业务说明（不是"获取任务"这种废话）（1 分）

**检查要点**：
- [ ] GET /api/tasks 文档完整（4 分）
- [ ] POST /api/tasks 文档完整（4 分）
- [ ] PUT /api/tasks/{id} 文档完整（2 分）
- [ ] DELETE /api/tasks/{id} 文档完整（2 分）
- [ ] 参数描述清晰（3 分）

**常见错误**：
- description 写废话（如"获取任务列表"而不是"返回当前用户的所有任务，按创建时间倒序排列"）
- 缺少错误响应（404、400、500）
- 参数没有说明（如 `{id}` 没说是 UUID）

#### 1.3 数据模型定义（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| Task 模型 | 4 | 包含所有字段，类型正确，required 正确 |
| TaskInput 模型 | 3 | 包含创建任务所需的字段 |
| Error 模型 | 2 | 包含错误信息结构 |
| 字段描述 | 1 | 每个字段有 description |

**Task 模型评分**（4 分）：
- [ ] 包含 id、title、completed 字段（2 分）
- [ ] required 字段正确（1 分）
- [ ] 字段类型正确（1 分）

**检查要点**：
- [ ] Task 模型定义完整（4 分）
- [ ] TaskInput 模型定义完整（3 分）
- [ ] Error 模型定义完整（2 分）
- [ ] 字段描述清晰（1 分）

**常见错误**：
- required 字段错误（如 id 不是 required）
- 字段类型错误（如 createdAt 是 string 而不是 date-time）
- 缺少 description 说明

#### 1.4 错误码文档（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 404 Not Found | 2 | 说明什么情况下返回 404 |
| 400 Bad Request | 2 | 说明什么情况下返回 400 |
| 500 Internal Server Error | 1 | 说明服务器错误的情况 |

**检查要点**：
- [ ] 404 Not Found 文档（2 分）
- [ ] 400 Bad Request 文档（2 分）
- [ ] 500 Internal Server Error 文档（1 分）

**常见错误**：
- 只写了状态码，没有说明什么情况下返回
- 缺少错误响应示例

---

### 2. README（30 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 26-30 | README 结构清晰，快速开始能 5 分钟跑起来，使用示例完整，常见问题来自真实反馈 |
| 良好 | 20-25 | README 基本完整，能运行起来，但缺少部分细节 |
| 合格 | 15-19 | README 存在，但缺少关键信息 |
| 不合格 | 0-14 | README 缺失或严重不完整 |

#### 2.1 快速开始（10 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 前置要求 | 2 | 清晰说明 Java、Maven 版本要求 |
| 5 分钟运行步骤 | 5 | 步骤清晰，每个命令能运行 |
| 验证步骤 | 2 | 包含如何验证安装成功 |
| 命令准确性 | 1 | 所有命令复制粘贴能执行 |

**检查要点**：
- [ ] 前置要求清晰（2 分）
- [ ] 5 分钟运行步骤完整（5 分）
- [ ] 每个命令都能运行（复制粘贴验证）（2 分）
- [ ] 包含验证步骤（1 分）

**验证方式**：
按照 README 的步骤，从头运行项目。**"5 分钟"包括从克隆仓库（`git clone`）到编译启动（`mvn compile`）再到访问成功（`curl http://localhost:8080`）的全过程。**
>
> 具体验证步骤：`git clone` → `mvn compile exec:java` → 访问 URL 验证响应。总时长应 ≤ 5 分钟。
>

**常见错误**：
- 命令错误（如 `mvn install` 而不是 `mvn compile exec:java`）
- 缺少前置要求（如没说需要 Java 17）
- 步骤过多（超过 5 分钟）

#### 2.2 功能特性（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 功能列表 | 3 | 清晰列出核心功能 |
| 格式美观 | 2 | 使用 emoji 或图标增强可读性 |

**检查要点**：
- [ ] 功能列表清晰（3 分）
- [ ] 使用 emoji 或图标（2 分）

**常见错误**：
- 功能描述含糊（如"任务管理"而不是"创建任务、编辑任务、删除任务"）
- 列了不存在的功能

#### 2.3 使用指南（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 使用示例 | 3 | 包含至少 2 个使用示例 |
| 命令准确性 | 2 | curl 命令能执行 |

**检查要点**：
- [ ] 包含至少 2 个使用示例（3 分）
- [ ] 命令能运行（2 分）

**常见错误**：
- 命令错误（如缺少 `-X POST`、`-H "Content-Type: application/json"`）
- 示例不完整（只有命令，没有预期输出）

#### 2.4 常见问题（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 问题数量 | 2 | 至少 3 个常见问题 |
| 问题真实性 | 2 | 问题来自真实用户反馈（不是编造） |
| 回答准确性 | 1 | 回答清晰准确 |

**检查要点**：
- [ ] 至少 3 个常见问题（2 分）
- [ ] 问题来自真实用户反馈（1 分）
- [ ] 回答清晰准确（2 分）

**常见错误**：
- 问题编造（如"怎么安装 Java"这种不该问的问题）
- 回答错误（如路径错误）

#### 2.5 项目结构（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 目录树 | 3 | 清晰展示项目结构 |
| 目录说明 | 2 | 关键目录有说明 |

**检查要点**：
- [ ] 目录树清晰（3 分）
- [ ] 关键目录有说明（2 分）

**常见错误**：
- 目录树格式混乱
- 关键目录没有说明

---

### 3. ADR 索引（20 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 17-20 | ADR 索引完整，每个 ADR 有决策摘要、理由、后果，包含依赖图和待决策事项 |
| 良好 | 14-16 | ADR 索引基本完整，包含决策摘要 |
| 合格 | 10-13 | ADR 索引存在，但缺少部分细节 |
| 不合格 | 0-9 | ADR 索引缺失或严重不完整 |

#### 3.1 ADR 索引结构（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| ADR 列表 | 3 | 表格形式列出所有 ADR |
| 决策摘要 | 6 | 每个 ADR 包含决策、理由、后果 |
| 决策依赖图 | 3 | 清晰展示决策之间的依赖关系 |
| 待决策事项 | 3 | 列出未来需要决策的问题 |

**单个 ADR 摘要评分**（每个 1.5 分）：
- [ ] 包含"决策"（0.5 分）
- [ ] 包含"理由"（0.5 分）
- [ ] 包含"后果"（0.5 分）

**检查要点**：
- [ ] ADR 列表完整（3 分）
- [ ] 每个 ADR 包含决策摘要（6 分）
- [ ] 包含决策依赖图（3 分）
- [ ] 包含待决策事项（3 分）

**常见错误**：
- 决策摘要只是复制 ADR 标题（没有说明"是什么、为什么、后果"）
- 缺少决策依赖图
- 待决策事项为空

#### 3.2 链接完整性（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| ADR 链接 | 3 | 所有 ADR 链接有效 |
| 参考资源链接 | 2 | 外部链接有效 |

**检查要点**：
- [ ] 所有 ADR 链接有效（3 分）
- [ ] 参考资源链接有效（2 分）

**验证方式**：
逐一点击所有链接，确保 404 不存在。

**常见错误**：
- ADR 文件不存在（链接 404）
- 外部链接错误（URL 拼写错误）

---

### 4. 文档审查（10 分）

| 等级 | 分值 | 标准 |
|------|------|------|
| 优秀 | 9-10 | 使用审查清单逐项检查，发现多个问题，修复完整，经验总结深入 |
| 良好 | 7-8 | 使用审查清单检查，发现问题并修复 |
| 合格 | 5-6 | 基本使用审查清单，但检查不完整 |
| 不合格 | 0-4 | 未使用审查清单或报告不完整 |

#### 4.1 AI 生成文档（2 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 保存原始输出 | 2 | 保存了 AI 生成的原始文档 |

**检查要点**：
- [ ] 保存了 AI 生成的原始文档（2 分）

#### 4.2 审查清单使用（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 准确性检查 | 2 | 检查命令、链接、示例 |
| 完整性检查 | 1 | 检查文档覆盖面 |
| 清晰度检查 | 1 | 检查结构和表述 |
| AI 幻觉检查 | 1 | 发现虚构功能、过时命令 |

**检查要点**：
- [ ] 使用清单逐项检查（3 分）
- [ ] 记录发现的问题（2 分）

**常见问题**：
- 只说"文档很好"，没有具体问题
- 没有使用清单逐项检查

#### 4.3 审查报告（3 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|---------|
| 问题列表 | 1 | 清晰列出发现的问题 |
| 修复后文档 | 1 | 附上修复后的完整文档 |
| 经验总结 | 1 | 总结 AI 擅长/不擅长 |

**检查要点**：
- [ ] 报告包含发现的问题（1 分）
- [ ] 报告包含修复后的文档（1 分）
- [ ] 报告包含经验总结（1 分）

**常见问题**：
- 经验总结太空泛（如"AI 很有用"而不是"AI 擅长生成框架，但不擅长准确描述项目细节"）

---

## 进阶作业评分（+20 分）

### 进阶 1：集成 Swagger UI（+10 分）

| 项目 | 分值 | 评分标准 |
|------|------|---------|
| Swagger UI 访问 | 5 | http://localhost:8080/swagger-ui 能访问 |
| 交互式测试 | 5 | 可以在 Swagger UI 中测试 API |

**检查要点**：
- [ ] Swagger UI 能正常访问（5 分）
- [ ] 可以在 Swagger UI 中测试 API（5 分）

---

### 进阶 2：文档自动化（+10 分）

| 项目 | 分值 | 评分标准 |
|------|------|---------|
| CI 配置 | 5 | CI 配置文件存在，能自动验证 OpenAPI |
| 版本同步 | 5 | 文档和代码版本标签一致 |

**检查要点**：
- [ ] CI 配置文件存在（5 分）
- [ ] OpenAPI 验证通过（3 分）
- [ ] 文档和代码版本标签一致（2 分）

---

## 等级划分

| 等级 | 分数范围 | 描述 |
|------|---------|------|
| **A** | 90-100 | API 文档完整，README 清晰，ADR 索引完整，文档审查深入 |
| **B** | 80-89 | API 文档基本完整，README 可用，ADR 索引基本完整 |
| **C** | 70-79 | API 文档包含核心端点，README 基本可用，ADR 索引存在 |
| **D** | 60-69 | 文档存在但缺少关键信息 |
| **F** | <60 | 文档缺失或严重不完整 |

---

## AI 协作练习评分（单独记录，不影响基础分数）

### AI 生成 README 审查

| 等级 | 评价 | 标准 |
|------|------|------|
| 优秀 | ⭐⭐⭐ | 发现 3+ 个问题，修复完整，经验总结深入 |
| 良好 | ⭐⭐ | 发现 2 个问题，有修复和总结 |
| 合格 | ⭐ | 发现 1 个问题，有基本报告 |

**检查要点**：
- [ ] 使用审查清单逐项检查
- [ ] 记录发现的问题（准确、完整、清晰、AI 幻觉）
- [ ] 附上修复后的 README
- [ ] 经验总结具体（不是泛泛而谈）

---

## 迟交政策

| 迟交时间 | 扣分 |
|---------|------|
| 24 小时内 | -10% |
| 48 小时内 | -20% |
| 超过 48 小时 | 按 0 分计 |

---

## 学术诚信

- **允许**：使用 AI 辅助生成文档、参考公开文档
- **禁止**：
  - 复制其他同学的文档
  - 编造虚假的审查报告
  - ADR 索引只是复制粘贴，没有思考

**AI 使用透明化**：如果使用 AI 辅助生成文档，需在 REVIEW_REPORT.md 中记录使用的 Prompt 和 AI 输出，以及你的审查发现。

---

## 评分检查清单（助教使用）

### 文件完整性检查
- [ ] openapi.yaml 存在
- [ ] README.md 存在且完整
- [ ] docs/ADR_INDEX.md 存在
- [ ] docs/REVIEW_REPORT.md 存在

### 功能验证
- [ ] openapi.yaml 在 OpenAPI Editor 中验证通过
- [ ] 按照 README 步骤能 5 分钟内跑起来
- [ ] 所有 ADR 链接有效
- [ ] 所有外部链接有效

### 代码审查
- [ ] API 文档包含所有端点
- [ ] README 命令能执行
- [ ] ADR 索引包含决策摘要
- [ ] 审查报告使用清单逐项检查

---

## 反馈模板

### 优秀作业反馈示例
```
总分：94/100（A）

亮点：
- openapi.yaml 完整，包含所有端点，数据模型定义清晰
- README 结构清晰，快速开始能 5 分钟跑起来，使用示例完整
- ADR 索引完整，每个 ADR 有决策摘要、理由、后果
- 文档审查使用清单逐项检查，发现的问题准确，修复完整
- 经验总结深入（"AI 擅长生成框架，但不擅长准确描述项目细节"）

建议：
- 可以考虑在 README 中添加截图，更直观展示界面
- ADR 索引可以添加"决策日期"，方便回顾时间线
```

### 需改进作业反馈示例
```
总分：65/100（D）

问题：
- openapi.yaml 缺少部分端点文档（PUT /api/tasks/{id}、DELETE /api/tasks/{id}）（-8 分）
- README 缺少验证步骤，不知道如何确认安装成功（-5 分）
- README 命令错误（`mvn install` 而不是 `mvn compile exec:java`）（-5 分）
- ADR 索引缺少决策依赖图和待决策事项（-8 分）
- 文档审查没有使用清单逐项检查，只说"文档很好"（-7 分）

改进建议：
1. 补充缺失的 API 端点文档（PUT、DELETE）
2. README 添加验证步骤（如 curl http://localhost:8080/api/tasks）
3. 验证所有命令是否能执行（复制粘贴跑一遍）
4. ADR 索引添加决策依赖图和待决策事项
5. 文档审查使用清单逐项检查（准确、完整、清晰、AI 幻觉）
```

---

## 验证命令（助教使用）

```bash
# 验证 OpenAPI 文档
npx @apidevtools/swagger-cli validate openapi.yaml

# 验证 README 命令
cd /path/to/submission
# 按照 README 步骤运行项目

# 检查链接
grep -o 'http.*' docs/ADR_INDEX.md | xargs -I {} curl -I {}

# 检查文件存在
ls openapi.yaml
ls README.md
ls docs/ADR_INDEX.md
ls docs/REVIEW_REPORT.md
```

---

## 测试运行验证评分

| 文档类型 | 验证方式 | 预期结果 |
|---------|---------|---------|
| OpenAPI | OpenAPI Editor 验证 | 格式正确，无错误 |
| README | 按步骤运行项目 | 5 分钟内跑起来 |
| ADR 索引 | 点击所有链接 | 无 404 |
| 审查报告 | 检查清单使用情况 | 逐项检查 |

**扣分项**：
- OpenAPI 格式错误：-10 分
- README 无法运行：-15 分
- 链接 404：-2 分/个
- 审查报告未使用清单：-5 分
- 提交延迟（每天）：-5 分
