# CampusFlow 架构决策索引

本文档汇总了 CampusFlow 项目的所有架构决策记录（ADR）。

## ADR 列表

| ADR | 标题 | 日期 | 状态 | 影响 |
|-----|------|------|------|------|
| ADR-001 | 领域模型设计 | 2026-01-15 | 已采纳 | 高 |
| ADR-002 | 数据存储方案 | 2026-02-01 | 已采纳 | 高 |
| ADR-003 | REST API 设计 | 2026-02-15 | 已采纳 | 中 |
| ADR-004 | 架构演进 | 2026-02-28 | 已采纳 | 高 |

## 决策摘要

### ADR-001：领域模型设计

**决策**：采用贫血模型（Anemic Domain Model）

- Task 作为数据实体，业务逻辑在 Service 层
- 优点：简单、易理解、适合小团队
- 缺点：业务逻辑分散，项目大时难以维护

**后果**：如果项目演变成大型系统，需考虑演进为充血模型。

### ADR-002：数据存储方案

**决策**：使用内存存储（InMemoryTaskRepository）

- 适用于开发和测试环境
- 优点：零配置、快速启动
- 缺点：数据不持久化，重启丢失

**后果**：如果需要持久化，需迁移到 SQLite 或其他数据库。

### ADR-003：REST API 设计

**决策**：采用标准 RESTful 风格

- 资源导向：`/tasks`、`/tasks/{id}`
- HTTP 方法语义：GET（读取）、POST（创建）、PUT（更新）、DELETE（删除）
- JSON 格式响应

**后果**：如果需要 GraphQL 或 gRPC，需重新设计 API。

### ADR-004：架构演进

**决策**：不引入 Spring Boot

- 继续使用 Javalin（极简框架）
- 理由：学习 Java 核心技术，不依赖框架魔法

**后果**：如果项目进入生产环境，需重新评估 Spring Boot。

## 决策依赖图

```
ADR-001（领域模型）
    ↓ 影响
ADR-002（数据存储）
    ↓ 影响
ADR-003（API 设计）
    ↓ 影响
ADR-004（架构演进）
```

## 待决策事项

- [ ] 是否引入缓存层（Redis）？
- [ ] 是否需要消息队列（异步任务）？
- [ ] 是否迁移到持久化存储（SQLite）？

---

**最后更新**：2026-02-12 (Week 13)
