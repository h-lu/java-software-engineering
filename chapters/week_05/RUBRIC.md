# Week 05 评分标准

## 基础作业（70 分）

### 功能完整性（30 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 添加记录功能 | 8 分 | 能正确接收用户输入（日期、类型、金额、备注）并存储到字典（8 分）；能接收输入但存储逻辑有误（4-6 分）；无法正确添加记录（0 分） |
| 查看记录功能 | 8 分 | 能正确显示所有记录，按日期排序（8 分）；能显示但排序或格式有问题（4-6 分）；无法正确显示（0 分） |
| 文件保存功能 | 8 分 | 退出程序后，数据能正确保存到文件（8 分）；能保存但格式有问题（4-6 分）；无法保存（0 分） |
| 文件加载功能 | 6 分 | 程序启动时能正确加载旧数据（6 分）；能加载但数据有丢失或错误（3-4 分）；无法加载（0 分） |

### 技术要求（25 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 使用 `with` 语句 | 6 分 | 所有文件操作都用 `with` 语句（6 分）；部分使用（3 分）；完全没用（0 分） |
| 使用 `pathlib` | 6 分 | 用 `pathlib.Path` 处理文件路径（6 分）；只用了 `Path()` 但没用其他功能（3 分）；没用（0 分） |
| 使用 UTF-8 编码 | 5 分 | 所有文件操作都指定 `encoding="utf-8"`（5 分）；部分指定（2-3 分）；没用（0 分） |
| 用字典存储数据 | 4 分 | 用字典存储账目记录（4 分）；用其他数据结构但能工作（2 分）；数据组织混乱（0 分） |
| 用函数封装逻辑 | 4 分 | 核心逻辑都封装成函数（4 分）；部分封装（2 分）；全部写在主流程（0 分） |

### 代码质量（15 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 代码可运行性 | 6 分 | 运行不崩溃，基本功能正常（6 分）；偶尔崩溃但有恢复逻辑（3 分）；经常崩溃（0 分） |
| 变量命名清晰 | 4 分 | 变量名有意义，符合 Python 规范（4 分）；部分命名不清晰（2 分）；命名混乱（0 分） |
| 代码注释 | 3 分 | 关键逻辑有注释（3 分）；注释很少（1 分）；无注释（0 分） |
| README 文档 | 2 分 | 包含运行说明和功能描述（2 分）；只有运行说明（1 分）；无 README（0 分） |

---

## 进阶作业（20 分）

### 统计功能（8 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 基本统计计算 | 5 分 | 正确计算总收入、总支出、结余（5 分）；部分正确（2-3 分）；全部错误（0 分） |
| 最大支出查找 | 3 分 | 能正确找出支出最高的记录（3 分）；逻辑有误（1-2 分）；无法实现（0 分） |

### 搜索功能（7 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 搜索逻辑正确 | 5 分 | 能按关键词搜索备注，显示正确结果（5 分）；能搜索但显示有问题（2-3 分）；无法实现（0 分） |
| 用户交互友好 | 2 分 | 有清晰的提示信息（2 分）；提示不清晰（1 分）；无提示（0 分） |

### 追加模式改进（5 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 追加模式实现 | 5 分 | 每次添加记录立即追加到文件（5 分）；能用追加模式但逻辑有问题（2-3 分）；无法实现（0 分） |

---

## AI 协作练习（10 分）

### 问题识别（4 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 找出的问题数量 | 2 分 | 找出 3 个及以上问题（2 分）；找出 1-2 个问题（1 分）；没找出问题（0 分） |
| 问题描述准确 | 2 分 | 每个问题描述清晰，说明原因和后果（2 分）；描述模糊（1 分）；描述错误（0 分） |

### 代码修复（4 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 修复正确性 | 3 分 | 所有修复都正确且有效（3 分）；部分正确（1-2 分）；修复无效（0 分） |
| 修复规范性 | 1 分 | 修复后的代码符合 Python 规范（1 分）；不规范（0 分） |

### 测试验证（2 分）

| 评分项 | 分值 | 评分标准 |
|--------|------|----------|
| 测试用例设计 | 2 分 | 有明确的测试用例，能证明修复有效（2 分）；有测试但不完整（1 分）；无测试（0 分） |

---

## 扣分项

### 代码规范问题（-5 分/项，最多 -10 分）

- 变量名不符合 Python 规范（如用 `var1`、`temp`、`data`）
- 函数没有文档字符串（docstring）
- 代码格式混乱（缩进不一致、空行过多或过少）
- 魔法数字（hardcoded 数字）没有解释

### 严重问题（-10 分/项，最多 -20 分）

- 完全没用 `with` 语句，文件操作不安全
- 完全没用 `pathlib`，硬编码路径
- 没有指定编码，中文会乱码
- 文件不存在时程序崩溃
- 代码无法运行（语法错误、逻辑错误导致无法启动）

### 提交问题（-5 分/项，最多 -10 分）

- 缺少 `accountbook.txt` 数据文件
- 缺少 `README.md` 说明文档
- Git 提交次数少于 2 次
- 文件结构不符合要求（如直接放在根目录）

---

## 加分项（最多 +10 分）

### 创新功能（+5 分）

- 实现了作业要求之外的有用功能（如导出 CSV、按月统计、数据可视化等）
- 功能设计合理，代码质量高

### 代码质量优秀（+5 分）

- 代码结构清晰，函数职责单一，易于维护
- 有完整的错误处理和边界情况处理
- 有详细的注释和文档字符串
- 代码风格符合 PEP 8 规范

### 完整的 AI 审查报告（+3 分）

- AI 协作练习报告格式完整，问题分析深入
- 修复后的代码质量高，有详细测试说明

---

## 总分计算

```
总分 = 基础作业（70 分） + 进阶作业（20 分） + AI 协作练习（10 分） - 扣分项 + 加分项
```

### 等级划分

| 分数范围 | 等级 | 说明 |
|---------|------|------|
| 90-100 | 优秀（A） | 超出预期，代码质量高，有创新 |
| 80-89 | 良好（B） | 完成所有要求，质量较好 |
| 70-79 | 中等（C） | 完成基本要求，有改进空间 |
| 60-69 | 及格（D） | 勉强完成，存在较多问题 |
| 0-59 | 不及格（F） | 未达到基本要求 |

---

## 评分流程

1. **自动测试**（如果有 pytest 测试）
   - 运行 `python3 -m pytest chapters/week_05/tests -q`
   - 测试通过率作为基础分参考

2. **人工代码审查**
   - 检查技术要求（with、pathlib、UTF-8）
   - 检查代码质量（命名、注释、结构）
   - 检查功能完整性（添加、查看、保存、加载）

3. **进阶作业评分**（如果提交）
   - 逐项检查进阶功能实现情况
   - 代码质量和技术难度

4. **AI 协作练习评分**（如果提交）
   - 检查问题识别是否准确
   - 检查代码修复是否正确
   - 检查测试验证是否完整

5. **扣分与加分**
   - 扣分项：代码规范、严重问题、提交问题
   - 加分项：创新功能、代码质量优秀、完整报告

---

## 评分反馈模板

```markdown
## Week 05 作业评分反馈

**总分**：XX/100

### 基础作业（XX/70）

- ✅ 添加记录功能：XX/8
- ✅ 查看记录功能：XX/8
- ✅ 文件保存功能：XX/8
- ✅ 文件加载功能：XX/6
- ✅ 使用 with 语句：XX/6
- ✅ 使用 pathlib：XX/6
- ✅ 使用 UTF-8 编码：XX/5
- ✅ 用字典存储数据：XX/4
- ✅ 用函数封装逻辑：XX/4
- ✅ 代码可运行性：XX/6
- ✅ 变量命名清晰：XX/4
- ✅ 代码注释：XX/3
- ✅ README 文档：XX/2

### 进阶作业（XX/20）

- ✅ 统计功能：XX/8
- ✅ 搜索功能：XX/7
- ✅ 追加模式改进：XX/5

### AI 协作练习（XX/10）

- ✅ 问题识别：XX/4
- ✅ 代码修复：XX/4
- ✅ 测试验证：XX/2

### 扣分项（-XX）

- ❌ [具体问题]：-X 分

### 加分项（+XX）

- ⭐ [具体亮点]：+X 分

---

### 主要优点

1. ...
2. ...

### 改进建议

1. ...
2. ...

### 下周期待

- [ ] 文件操作更熟练
- [ ] 异常处理（Week 06）
- [ ] 代码结构更清晰

加油！继续进步！
```

---

## 关键锚点（供测试参考）

以下是本周必须掌握的核心知识点，评分时会重点检查：

### 锚点 1：with 语句

**要求**：所有文件操作都必须用 `with` 语句

**验证方法**：
- 代码中搜索 `open(`，必须在 `with open(...) as ...:` 的上下文中
- 不能有 `file.close()` 的调用

### 锚点 2：pathlib

**要求**：使用 `pathlib.Path` 处理文件路径

**验证方法**：
- 代码中必须有 `from pathlib import Path`
- 路径相关操作用 `Path()` 或 `Path.home()` 或 `Path.cwd()`

### 锚点 3：UTF-8 编码

**要求**：所有文件操作都指定 `encoding="utf-8"`

**验证方法**：
- 所有 `open()` 调用都有 `encoding="utf-8"` 参数
- 如果用 `pathlib` 的 `read_text()` / `write_text()`，也要指定 `encoding="utf-8"`

### 锚点 4：文件存在性检查

**要求**：读取文件前检查文件是否存在

**验证方法**：
- 代码中有 `if data_file.exists()` 或 `try/except FileNotFoundError` 处理

### 锚点 5：数据持久化

**要求**：程序关闭后数据能保存，重新启动后能加载

**验证方法**：
- 运行程序，添加记录，退出，检查文件是否存在且有内容
- 重新运行程序，查看旧数据是否能正确加载

---

**祝学习愉快！有任何问题随时提问。**
